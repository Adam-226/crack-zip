# ZIP密码破解工具

一个强大的多线程 ZIP 密码破解工具，支持断点续传和实时进度显示。使用 Python 编写，能够高效破解纯数字密码的 ZIP 文件。

## 核心特性

- **多线程并行破解** - 充分利用多核 CPU，速度提升 4-8 倍
- **断点续传** - 按 Ctrl+C 安全中断，下次自动从断点继续
- **实时进度显示** - 显示破解速度、完成百分比和预计剩余时间
- **智能 ZIP 检测** - 正确处理各种类型的 ZIP 文件（包括"需要密码但未加密"的特殊情况）
- **线程安全** - 完善的锁机制和错误统计
- **性能优化** - 智能选择最小文件进行密码测试，提升效率

## 快速开始

```bash
python crack_zip_multithreaded.py [zip文件名] [最小位数] [最大位数] [线程数]
```

**参数说明：**
- `zip文件名` - 要破解的 ZIP 文件路径或当前目录下的文件（如 myfile.zip）
- `最小位数` - 密码最小位数（默认 3）
- `最大位数` - 密码最大位数（默认 5）
- `线程数` - 并行线程数

### 使用示例

```bash
# 破解指定文件，尝试 3-5 位数字密码
python crack_zip_multithreaded.py myfile.zip 3 5

# 如果知道密码是 4 位，可以只尝试 4 位
python crack_zip_multithreaded.py myfile.zip 4 4

# 手动指定使用 8 个线程
python crack_zip_multithreaded.py myfile.zip 3 5 8

# 尝试 6 位密码（注意：会花费较长时间）
python crack_zip_multithreaded.py myfile.zip 6 6
```

## 工作原理

### 破解流程

1. **文件验证** - 检查 ZIP 文件是否存在且有效
2. **密码检测** - 尝试无密码解压，判断是否需要密码
3. **多线程破解** - 创建多个工作线程，并行尝试密码组合
4. **进度保存** - 每 10000 次尝试自动保存检查点
5. **结果输出** - 找到密码或尝试完所有组合后报告结果

### 断点续传机制

- 程序会自动创建 `[文件名]_checkpoint.json` 检查点文件
- 按 Ctrl+C 中断时，进度会立即保存
- 下次运行相同命令，自动从上次中断处继续
- 找到密码或完成所有尝试后，检查点文件会自动删除

### 性能优化

脚本采用了多种优化策略：

1. **智能文件选择** - 只解压 ZIP 中最小的文件进行密码测试
2. **批量处理** - 密码按批次（100个/批）分发给线程
3. **结果缓存** - 避免重复尝试相同密码
4. **临时目录管理** - 每个线程使用独立的临时目录
5. **动态进度更新** - 每 2 秒更新一次进度信息

## 性能参考

实际性能取决于您的硬件配置和 ZIP 文件大小：

| CPU 核心数 | 处理速度 | 破解 10000 个密码 |
|-----------|----------|------------------|
| 4 核心 | ~400-800 密码/秒 | 12-25 秒 |
| 8 核心 | ~800-1600 密码/秒 | 6-12 秒 |
| 16 核心 | ~1600-3200 密码/秒 | 3-6 秒 |

**密码组合数量参考：**
- 3 位：1,000 种组合
- 4 位：10,000 种组合
- 5 位：100,000 种组合
- 6 位：1,000,000 种组合
- 7 位：10,000,000 种组合

## 使用建议

### 优化破解速度

1. **限制密码范围** - 如果有线索，缩小搜索范围可大幅减少时间
   ```bash
   # 从 3-5 位改为 4 位，减少 90% 的尝试次数
   python crack_zip_multithreaded.py file.zip 4 4
   ```

2. **调整线程数** - 默认使用所有核心，但可根据需要调整
   ```bash
   # 减少 CPU 占用，使用 4 个线程
   python crack_zip_multithreaded.py file.zip 3 5 4
   ```

3. **大文件处理** - 对于大型 ZIP 文件（如 GB 级别），多线程优势更明显

### 断点续传使用

```bash
# 开始破解
python crack_zip_multithreaded.py largefile.zip 3 6

# 按 Ctrl+C 中断（进度自动保存）
# 输出：进度已保存到 largefile.zip_checkpoint.json

# 稍后继续（使用相同命令）
python crack_zip_multithreaded.py largefile.zip 3 6
# 输出：从上次中断处继续: 已尝试 45000 个密码
```

### 系统资源管理

- **高 CPU 使用率是正常的** - 多线程破解会充分利用 CPU
- **如果系统卡顿** - 手动减少线程数
- **内存占用** - 通常很低，每个线程只需少量内存
- **磁盘 I/O** - 会创建临时文件，确保有足够的临时空间

## 判断结果

### 成功找到密码

```
密码找到了! 密码是: 12345
总共尝试了 12345 个密码组合
用时: 123.45 秒
```

### 未找到密码

```
未能找到密码，已尝试所有可能的组合。
总共尝试了 111000 个密码组合
总用时: 456.78 秒
```

**如果未找到密码，可能原因：**
1. 密码位数超出指定范围 - 尝试扩大范围
2. 密码包含字母或特殊字符 - 本工具仅支持纯数字
3. ZIP 文件损坏 - 检查文件完整性

## 技术说明

### ZIP 文件类型支持

本工具能够正确处理以下类型的 ZIP 文件：

1. **普通 ZIP** - 不需要密码的文件
2. **密码保护但未加密** - 只有密码检查，无内容加密
3. **密码保护且加密** - 标准加密 ZIP 文件

### 检测机制

- **不依赖文件头标志** - 之前的方法可能误判
- **实际解压验证** - 通过尝试解压来确认是否需要密码
- **智能错误处理** - 区分密码错误、文件损坏等不同情况

### 线程安全设计

- `count_lock` - 保护密码尝试计数
- `error_lock` - 保护错误统计字典
- `results_lock` - 保护密码结果缓存
- `password_found` 标志 - 快速终止所有线程

## 限制和注意事项

### 重要提醒

- **仅用于合法用途** - 只能破解您自己拥有的 ZIP 文件
- **纯数字密码** - 不支持字母、符号或混合密码
- **时间成本** - 长密码需要大量时间（7 位数字可能需要数小时）
- **无法保证成功** - 如果密码不在指定范围内，无法找到

### 法律声明

未经授权访问他人文件可能违反法律。本工具仅供以下合法用途：
- 恢复自己忘记的 ZIP 密码
- 安全测试和教育目的
- 合法授权的密码恢复服务

使用本工具即表示您同意仅将其用于合法目的。

## 扩展建议

如果需要破解非纯数字密码，可以考虑：

1. **添加字母支持** - 修改 `generate_passwords` 方法，使用 `string.ascii_lowercase` 等
2. **字典攻击** - 使用常用密码字典而非暴力破解
3. **掩码攻击** - 如果知道密码模式（如"字母+数字"）
4. **GPU 加速** - 使用专业工具如 Hashcat（需要提取 ZIP hash）

## 贡献和反馈

如果您有任何问题、建议或改进想法，欢迎提出！
